<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Foro Experiencias Usuarios - MindTea</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- Header y Navegaci칩n -->
    <header class="header">
        <nav class="navbar">
            <div class="nav-container">
                <div class="logo">
                    <img src="logo.png" alt="MindTea Logo" class="logo-img">
                    <span class="logo-text">MindTea</span>
                </div>
                <ul class="nav-menu" id="nav-menu">
                    <li class="nav-item">
                        <a href="index.html" class="nav-link">Inicio</a>
                    </li>
                    <li class="nav-item">
                        <a href="index.html#proposito" class="nav-link">Prop칩sito</a>
                    </li>
                    <li class="nav-item">
                        <a href="index.html#recursos" class="nav-link">Recursos</a>
                    </li>
                    <li class="nav-item">
                        <a href="index.html#contacto" class="nav-link">Contacto</a>
                    </li>
                </ul>
                <div class="hamburger" id="hamburger">
                    <span class="bar"></span>
                    <span class="bar"></span>
                    <span class="bar"></span>
                </div>
            </div>
        </nav>
    </header>

    <!-- Secci칩n Foro -->
    <section class="recursos-detalle">
        <div class="container">
            <div class="breadcrumb">
                <a href="index.html#recursos" class="breadcrumb-link">
                    <i class="fas fa-arrow-left"></i> Volver a Recursos
                </a>
            </div>
            
            <div class="foro-header">
                <div class="foro-icon">
                    <span class="emoji-icon">游눫</span>
                </div>
                <h1 class="section-title">Foro de Experiencias Usuarios</h1>
                <p class="foro-description">Comparte y lee experiencias reales de familias y profesionales sobre el TEA</p>
            </div>

            <!-- Bot칩n para publicar nueva experiencia -->
            <div class="publicar-experiencia">
                <button id="btn-publicar" class="btn btn-primary">
                    <i class="fas fa-plus"></i>
                    Publicar Nueva Experiencia
                </button>
            </div>

            <!-- Listado de experiencias -->
            <div class="experiencias-container">
                <h2 class="experiencias-title">Experiencias Recientes</h2>
                <div id="lista-experiencias" class="lista-experiencias">
                    <!-- Las experiencias se cargar치n din치micamente aqu칤 -->
                    <div class="experiencia-vacia">
                        <p>No hay experiencias publicadas a칰n. 춰S칠 el primero en compartir tu historia!</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Modal para publicar experiencia -->
    <div id="modal-experiencia" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Compartir Experiencia</h2>
                <span class="close">&times;</span>
            </div>
            <form id="form-experiencia" class="form-experiencia">
                <div class="form-group">
                    <label for="titulo">T칤tulo de la experiencia</label>
                    <input type="text" id="titulo" name="titulo" placeholder="Ej: Mi experiencia con la terapia ocupacional" required>
                </div>
                <div class="form-group">
                    <label for="categoria">Categor칤a</label>
                    <select id="categoria" name="categoria" required>
                        <option value="">Selecciona una categor칤a</option>
                        <option value="diagnostico">Diagn칩stico</option>
                        <option value="terapias">Terapias</option>
                        <option value="educacion">Educaci칩n</option>
                        <option value="vida-cotidiana">Vida Cotidiana</option>
                        <option value="derechos">Derechos y Leyes</option>
                        <option value="otro">Otro</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="experiencia">Tu experiencia</label>
                    <textarea id="experiencia" name="experiencia" placeholder="Comparte tu historia, consejos, aprendizajes..." rows="8" required></textarea>
                </div>
                <div class="form-group">
                    <label for="nombre">Tu nombre (opcional)</label>
                    <input type="text" id="nombre" name="nombre" placeholder="Puede ser an칩nimo">
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="btn-cancelar">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Publicar Experiencia</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <img src="logo.png" alt="MindTea Logo" class="footer-logo-img">
                    <span class="footer-logo-text">MindTea</span>
                </div>
                <p class="footer-motto">Conectando Familias con Profesionales</p>
                <div class="footer-social">
                    <a href="https://whatsapp.com/channel/0029Vb6fP7U2kNFi41gnhb1B" target="_blank" rel="noopener noreferrer" class="social-link">
                        <i class="fab fa-whatsapp"></i>
                    </a>
                    <a href="https://www.linkedin.com/company/mindtea/about/?viewAsMember=true" target="_blank" rel="noopener noreferrer" class="social-link">
                        <i class="fab fa-linkedin"></i>
                    </a>
                    <a href="https://www.instagram.com/mindteacl?igsh=emthZnl0cnEya2Zu" target="_blank" rel="noopener noreferrer" class="social-link">
                        <i class="fab fa-instagram"></i>
                    </a>
                    <a href="mailto:contacto@mindtea.cl" class="social-link">
                        <i class="fas fa-envelope"></i>
                    </a>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 MindTea. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
    <script>
        // Funcionalidad del foro
        document.addEventListener('DOMContentLoaded', function() {
            const modal = document.getElementById('modal-experiencia');
            const btnPublicar = document.getElementById('btn-publicar');
            const btnCancelar = document.getElementById('btn-cancelar');
            const closeBtn = document.querySelector('.close');
            const formExperiencia = document.getElementById('form-experiencia');
            const listaExperiencias = document.getElementById('lista-experiencias');

            // Cargar experiencias existentes
            cargarExperiencias();

            // Abrir modal
            btnPublicar.addEventListener('click', function() {
                modal.style.display = 'block';
            });

            // Cerrar modal
            closeBtn.addEventListener('click', function() {
                modal.style.display = 'none';
            });

            btnCancelar.addEventListener('click', function() {
                modal.style.display = 'none';
            });

            // Cerrar modal al hacer clic fuera
            window.addEventListener('click', function(event) {
                if (event.target === modal) {
                    modal.style.display = 'none';
                }
            });

            // Enviar formulario
            formExperiencia.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const titulo = document.getElementById('titulo').value;
                const categoria = document.getElementById('categoria').value;
                const experiencia = document.getElementById('experiencia').value;
                const nombre = document.getElementById('nombre').value || 'An칩nimo';

                // Crear nueva experiencia
                const nuevaExperiencia = {
                    id: Date.now(),
                    titulo: titulo,
                    categoria: categoria,
                    experiencia: experiencia,
                    nombre: nombre,
                    fecha: new Date().toLocaleDateString('es-CL'),
                    likes: 0
                };

                // Guardar en localStorage
                guardarExperiencia(nuevaExperiencia);

                // Actualizar lista
                cargarExperiencias();

                // Limpiar formulario y cerrar modal
                formExperiencia.reset();
                modal.style.display = 'none';

                // Mostrar mensaje de 칠xito
                alert('춰Tu experiencia ha sido publicada exitosamente!');
            });

            function cargarExperiencias() {
                let experiencias = obtenerExperiencias();
                
                // Si no hay experiencias, cargar algunas de ejemplo
                if (experiencias.length === 0) {
                    experiencias = obtenerExperienciasEjemplo();
                    // Guardar las experiencias de ejemplo
                    try {
                        localStorage.setItem('experiencias_mindtea', JSON.stringify(experiencias));
                    } catch (e) {
                        console.log('No se pudo guardar en localStorage:', e);
                    }
                }

                // Ordenar por fecha (m치s recientes primero)
                experiencias.sort((a, b) => b.id - a.id);

                // Verificar que hay experiencias para mostrar
                if (experiencias.length === 0) {
                    listaExperiencias.innerHTML = `
                        <div class="experiencia-vacia">
                            <p>No hay experiencias publicadas a칰n. 춰S칠 el primero en compartir tu historia!</p>
                        </div>
                    `;
                    return;
                }

                listaExperiencias.innerHTML = experiencias.map(exp => `
                    <div class="experiencia-item" data-id="${exp.id}">
                        <div class="experiencia-header">
                            <h3 class="experiencia-titulo">${exp.titulo}</h3>
                            <span class="experiencia-fecha">${exp.fecha}</span>
                        </div>
                        <div class="experiencia-categoria">
                            <span class="categoria-badge">${obtenerNombreCategoria(exp.categoria)}</span>
                        </div>
                        <div class="experiencia-contenido">
                            <p>${exp.experiencia}</p>
                        </div>
                        <div class="experiencia-footer">
                            <div class="experiencia-autor">
                                <i class="fas fa-user"></i>
                                <span>${exp.nombre}</span>
                            </div>
                            <div class="experiencia-acciones">
                                <button class="btn-like" onclick="darLike(${exp.id})">
                                    <i class="fas fa-heart"></i>
                                    <span>${exp.likes}</span>
                                </button>
                            </div>
                        </div>
                    </div>
                `).join('');
            }

            function obtenerExperiencias() {
                try {
                    const experiencias = localStorage.getItem('experiencias_mindtea');
                    if (experiencias) {
                        return JSON.parse(experiencias);
                    }
                } catch (e) {
                    console.log('Error al obtener experiencias de localStorage:', e);
                }
                return [];
            }

            function guardarExperiencia(experiencia) {
                const experiencias = obtenerExperiencias();
                experiencias.push(experiencia);
                localStorage.setItem('experiencias_mindtea', JSON.stringify(experiencias));
            }

            function obtenerExperienciasEjemplo() {
                const fechaActual = new Date();
                const fechaAyer = new Date(fechaActual);
                fechaAyer.setDate(fechaAyer.getDate() - 1);
                const fechaAnteayer = new Date(fechaActual);
                fechaAnteayer.setDate(fechaAnteayer.getDate() - 2);

                return [
                    {
                        id: fechaActual.getTime(),
                        titulo: "Mi experiencia con la terapia ocupacional",
                        categoria: "terapias",
                        experiencia: "Mi hijo de 5 a침os comenz칩 terapia ocupacional hace 6 meses y los resultados han sido incre칤bles. Al principio ten칤a dificultades con la coordinaci칩n motora fina y ahora puede abrocharse los botones solo. La terapeuta nos ense침칩 estrategias para trabajar en casa que han sido muy 칰tiles.",
                        nombre: "Mar칤a Gonz치lez",
                        fecha: fechaActual.toLocaleDateString('es-CL'),
                        likes: 8
                    },
                    {
                        id: fechaAyer.getTime(),
                        titulo: "Proceso de diagn칩stico en Chile",
                        categoria: "diagnostico",
                        experiencia: "Quiero compartir nuestra experiencia con el proceso de diagn칩stico. Nos tom칩 casi un a침o desde que notamos las primeras se침ales hasta obtener el diagn칩stico formal. El sistema p칰blico tiene largas listas de espera, pero finalmente encontramos un neuropediatra excelente que nos orient칩 muy bien.",
                        nombre: "Carlos Rodr칤guez",
                        fecha: fechaAyer.toLocaleDateString('es-CL'),
                        likes: 12
                    },
                    {
                        id: fechaAnteayer.getTime(),
                        titulo: "Adaptaciones en el colegio que funcionaron",
                        categoria: "educacion",
                        experiencia: "Mi hija est치 en 3춿 b치sico y hemos implementado varias adaptaciones que han mejorado su experiencia escolar: agenda visual, descansos sensoriales programados y un sistema de comunicaci칩n con su profesora. El colegio ha sido muy receptivo y los resultados son muy positivos.",
                        nombre: "Ana Silva",
                        fecha: fechaAnteayer.toLocaleDateString('es-CL'),
                        likes: 15
                    },
                    {
                        id: fechaAnteayer.getTime() - 1000000,
                        titulo: "Rutinas que nos han ayudado en casa",
                        categoria: "vida-cotidiana",
                        experiencia: "Las rutinas visuales han sido nuestro salvavidas. Creamos un tablero con pictogramas para las actividades diarias: levantarse, vestirse, desayunar, etc. Esto ha reducido significativamente la ansiedad y las crisis. Tambi칠n implementamos un sistema de recompensas que motiva mucho a nuestro hijo.",
                        nombre: "Pedro Mart칤nez",
                        fecha: fechaAnteayer.toLocaleDateString('es-CL'),
                        likes: 20
                    },
                    {
                        id: fechaAnteayer.getTime() - 2000000,
                        titulo: "Conociendo nuestros derechos",
                        categoria: "derechos",
                        experiencia: "Recientemente aprend칤 sobre la Ley de Autismo en Chile y ha sido fundamental para defender los derechos de mi hijo en el sistema de salud y educaci칩n. Es importante que todas las familias conozcan esta ley y sepan c칩mo aplicarla. Recomiendo contactar a las fundaciones que ofrecen asesor칤a legal gratuita.",
                        nombre: "Laura Fern치ndez",
                        fecha: fechaAnteayer.toLocaleDateString('es-CL'),
                        likes: 18
                    }
                ];
            }

            function obtenerNombreCategoria(categoria) {
                const categorias = {
                    'diagnostico': 'Diagn칩stico',
                    'terapias': 'Terapias',
                    'educacion': 'Educaci칩n',
                    'vida-cotidiana': 'Vida Cotidiana',
                    'derechos': 'Derechos y Leyes',
                    'otro': 'Otro'
                };
                return categorias[categoria] || 'General';
            }
        });

        // Funci칩n global para dar like
        function darLike(id) {
            const experiencias = JSON.parse(localStorage.getItem('experiencias_mindtea')) || [];
            const experiencia = experiencias.find(exp => exp.id === id);
            
            if (experiencia) {
                experiencia.likes = (experiencia.likes || 0) + 1;
                localStorage.setItem('experiencias_mindtea', JSON.stringify(experiencias));
                
                // Actualizar el contador en la interfaz
                const likeBtn = document.querySelector(`.experiencia-item[data-id="${id}"] .btn-like span`);
                if (likeBtn) {
                    likeBtn.textContent = experiencia.likes;
                }
            }
        }
    </script>
</body>
</html>
